(function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e(require("vue")):"function"===typeof define&&define.amd?define(["vue"],e):"object"===typeof exports?exports["cqc"]=e(require("vue")):(t["cqc"]=t["cqc"]||{},t["cqc"]["drag-list"]=e(t["vue"]))})(self,(function(t){return function(){"use strict";var e={441:function(e){e.exports=t}},a={};function o(t){var r=a[t];if(void 0!==r)return r.exports;var d=a[t]={exports:{}};return e[t](d,d.exports,o),d.exports}!function(){o.d=function(t,e){for(var a in e)o.o(e,a)&&!o.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}();var r={};return function(){o.d(r,{default:function(){return d}});var t=o(441),e={name:"CqcDragListItem",props:{data:{type:Object},index:{type:Number,default:0}},setup(e){const{slot:a,dragStart:o,dragEnd:r,dragOver:d,drop:n}=(0,t.inject)("drag-list"),i=e.data,s=e.index,c={onDragstart(t){t.stopPropagation(),o(t,i)},onDragover(t){t.preventDefault(),t.stopPropagation(),d(t,i)},ondragend(t){t.stopPropagation(),r(t,i)},onDrop(t){n(t,i)}};return()=>(0,t.createVNode)("div",(0,t.mergeProps)({class:"cqc-drag-list-item",draggable:"true"},c),[a&&a({index:s,row:i})])}},a={name:"CqcDragList",components:{Item:e},emits:["change"],props:{data:{type:Array,default:()=>[]}},setup(a,{slots:o,emit:r}){const d=(0,t.reactive)({data:[],dropPosition:"",dragNode:null,dragData:null,dropData:null,showInditcator:{display:"none",top:"9999px",left:0}}),n=t=>(t._dargKey=0,t.forEach(((t,e)=>t._dargKey=e+1)),JSON.parse(JSON.stringify(t))),i=(0,t.ref)(null),s=(t,e)=>{d.dragNode=t.target,d.dragData=e},c=(t,e)=>{if(d.dragData._dargKey===e._dargKey)return!1;const{top:a,bottom:o,height:r}=t.target.getBoundingClientRect(),n=i.value.getBoundingClientRect().top,s=t.clientY;s-a>r/2&&s-a<r?(d.dropPosition=2,d.showInditcator.top=o-n+"px",d.showInditcator.display="block"):s-a>0&&s-a<r/2?(d.dropPosition=1,d.showInditcator.top=a-n+"px",d.showInditcator.display="block"):(d.dropPosition="",d.showInditcator.display="none")},p=(t,e)=>{d.dropData=e},l=()=>{d.dropPosition="",d.dragNode=null,d.dragData=null,d.dropData=null,d.showInditcator={display:"none",top:"9999px",left:0}},g=()=>{if(d.dropPosition&&d.dropData){d.data=JSON.parse(JSON.stringify(d.data.filter((t=>t._dargKey!==d.dragData._dargKey))));const t=d.data.findIndex((t=>t._dargKey===d.dropData._dargKey));1===d.dropPosition?d.data.splice(t,0,d.dragData):2===d.dropPosition&&d.data.splice(t+1,0,d.dragData)}l(),r("change",d.data)};(0,t.provide)("drag-list",{slot:o.default,dragStart:s,dragOver:c,dragEnd:g,drop:p}),(0,t.watch)(a.data,(t=>{d.data=n(t)}),{immediate:!0});const u=a=>a&&0!==a.length?a.map(((a,o)=>(0,t.createVNode)(e,{index:o,data:a,key:a._dargKey},null))):(0,t.createVNode)("div",null,[(0,t.createTextVNode)("暂无数据")]);return()=>(0,t.createVNode)("div",{class:"cqc-drag-list",ref:i},[u(d.data),(0,t.createVNode)("div",{class:"cqc-drap-inditcator",style:d.showInditcator},null)])},install:t=>t.component(a.name,a)},d=a}(),r=r["default"],r}()}));